<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-item/core-item.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/core-localstorage/core-localstorage.html">

<polymer-element name="em-stored-list" attributes="activeItem">
    <template>
        <link rel="stylesheet" href="em-stored-list.css">
        <core-menu theme="core-light-theme">
            <template repeat="{{ item in items }}">
                <core-item icon="speaker-notes" label="{{item.Title}}" on-click="{{setActiveItem}}" horizontal center
                           layout></core-item>
            </template>
        </core-menu>
        <core-localstorage name="activeItem" value="{{activeItem}}"></core-localstorage>
        <core-localstorage name="items" value="{{items}}"></core-localstorage>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer('em-stored-list', {
                ready: function () {
                    /* var items = localStorage.items;
                     if (!items) {
                     items = [{Title: 'Hello Push API', Message: 'It is workiiing!'}];
                     } else {
                     items = JSON.parse(items);
                     }
                     this.items = items; */
                },
                setActiveItem: function (e, detail, sender) {
                    console.log('update active item')
                    this.activeItem = sender.templateInstance.model.item;
                }
            });
        })();
    </script>
</polymer-element>
